#!/usr/bin/env ruby

require "gli"
require "byebug"

require_relative "../lib/tlapse"

include GLI::App
include Tlapse

program_desc "Automated time lapse photography via gphoto2"
version Tlapse::VERSION

desc "Determine whether you are ready to start capturing"
command :doctor do |c|
  c.action do |global_options,options,args|
    doctor
  end
end

desc "Capture a single photo, saving it to the current directory"
command :single do |c|
  c.action do |global_options,options,args|
    capture_single
  end
end

desc "Use ffmpeg to combine all .jpg files in the current directory"
command :combine do |c|
  c.action do |global_options,options,args|
    create_video
  end
end

exit run(ARGV)

